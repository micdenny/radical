# configuration for "master" branch
# build in Release mode and deploy to NuGet.org
- version: 1.8.0+{build}
  branches:
    only:
    - deploy
  configuration: Release
  platform: Any CPU
  install:
  - ps: .\appveyor-buildversion.ps1
  assembly_info:
    patch: true
    file: '**\AssemblyInfo.*'
    assembly_version: '$(assembly_version)'
    assembly_file_version: '$(assembly_file_version)'
    assembly_informational_version: '$(assembly_informational_version)'
  before_build:
  - nuget restore "src\Radical.sln"
  build:
    project: src\Radical.sln
    verbosity: minimal
  after_build:
  - md "src\build\nuget"
  - nuget pack "src\nuget\Radical.nuspec" -Version "%package_version%" -Properties "configuration=%CONFIGURATION%" -OutputDirectory "src\build\nuget"
  test: off
  artifacts:
  - path: src\build\Release
  - path: src\build\nuget\*.nupkg
  deploy:
  - provider: Environment
    name: MyGet Private Radical (micdenny)
    on:
      branch: deploy

# configuration for "development" branch
# build in Debug mode and deploy to MyGet.org as pre-release
- version: 1.8.0-alpha1+{build}
  branches:
    only:
    - deploy-development
  configuration: Debug
  platform: Any CPU
  install:
  - ps: .\appveyor-buildversion.ps1
  assembly_info:
    patch: true
    file: '**\AssemblyInfo.*'
    assembly_version: '$(assembly_version)'
    assembly_file_version: '$(assembly_file_version)'
    assembly_informational_version: '$(assembly_informational_version)'
  before_build:
  - where nuget
  - nuget help
  - nuget restore "src\Radical.sln"
  build:
    project: src\Radical.sln
    verbosity: minimal
  after_build:
  - md "src\build\nuget"
  - nuget pack "src\nuget\Radical.nuspec" -Version "%package_version%-%assembly_build%" -Properties "configuration=%CONFIGURATION%" -OutputDirectory "src\build\nuget"
  test: off
  artifacts:
  - path: src\build\Release
  - path: src\build\nuget\*.nupkg
  deploy:
  - provider: Environment
    name: MyGet Private Radical (micdenny)
    on:
      branch: deploy-development
